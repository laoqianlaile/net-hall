"use strict";function inintNeckInfo(e){e&&e.instname&&$("#frameCompany").removeClass("hide").find("span").text(e.instname)}function getUrl(e){return e?e=/^(\w+:)?\/\//.test(e)?e:ydl.contexPath+e:"javascript:void(0);"}function refreshTab(e){e||(e=$("#frameNav li.active").data("tabid"));var t=document.getElementById("mainFrame"+e);t&&t.contentWindow.location.reload(!0)}function addTab(e,t){t&&"string"==typeof t&&(t={tabName:t}),t=$.extend({show:!0},t);var a=$("#frameNav").data("maxid");$("#frameNav li.active").after('<li data-tabid="'+a+'"><a href="#mainTab'+a+'" data-toggle="tab" data-id="'+t.dataId+'" title="'+(t.tabName||"正在加载")+'">'+(t.tabName||"正在加载")+"</a><span></span></li>"),$("#mainWrap").append('<div id="mainTab'+a+'" class="tab-pane"><iframe id="mainFrame'+a+'" name="mainFrame'+a+'" src="'+e+'" frameborder="0"></iframe></div>'),$("#frameNav").data("maxid",parseInt(a)+1);var n=$("#frameNav").data("taburl")||{};return n[e]?n[e]=n[e]+","+a:n[e]=""+a,$("#frameNav").data("taburl",n),size(),showTab(a),a}function showTab(e){$('#frameNav a[href="#mainTab'+e+'"]').tab("show")}function reNewBreadNav(e,t){var a=$("#frameCurrentPlace");"首页"==e?a.text("首页"):"正在加载"!=e&&a.text(("$$$$$$$$"==t||""==t?"":t+">")+e)}function reNewMenuHover(e,t){var a=$("#frameMenuBase");a.find(".active").removeClass("active"),"home"!=e&&a.find('li[data-id="'+t+'"], li[data-id="'+e+'"]').addClass("active")}function closeNotice(e,t){var a,n,i,o;"systemExit"==e?(i="确认退出系统",o="取消退出,确认退出",n=$("#systemExit").attr("data-href")):(a=t?t.$$("b_flow_h"):"",i="确认关闭页签",o="取消关闭,继续关闭"),ydl.customDialog({title:i,text:"请确认是否要放弃正在编辑的内容，关闭当前页签？"+(a?"<br /><br />如果您想保留正在编辑的内容，请先暂存。":""),buttons:o+(a?",暂存并继续":""),callback:function(t){2==t&&a&&$(a).click(),0!=t&&("systemExit"==e?(ydl.sessionData("pdPreTime",null),ydl.sessionData("plat_curplace",null),ydl.sessionData("plat_curmenuid",null),ydl.sessionData("msgDic",null),ydl.sessionData("pdPreCounts",null),ydl.sessionData("percnt",null),ydl.sessionData("plat_userdata",null),ydl.sessionData("syscnt",null),ydl.sessionData("menuDescMap",null),ydl.sessionData("sys_menu_"+poolSelect._OPERID,null),ydl.go(n,top)):delTabDo(e))}})}function delTab(e){if(1==$("#frameNav  li").length||"Home"==e)return!1;if(void 0==e){var t=$("#frameNav  li.active");e=t.data("tabid")}var a=$("#mainFrame"+e)?$("#mainFrame"+e)[0].contentWindow:void 0,n=a?a.pageData:void 0;n&&n.pageConfig&&1==n.pageConfig.isLeavePrompt?closeNotice(e,a):delTabDo(e)}function delTabDo(e){var t=$("#mainFrame"+e).attr("src"),a=$("#frameNav").data("taburl")||{},n=a[t];if(n){var i=n.split(",");i.splice($.inArray(t,i),1),0==i.length?delete a[t]:a[t]=i.join(",")}$("#frameNav").data("taburl",a);var o=$('#frameNav  a[href="#mainTab'+e+'"]').parent();if(o.hasClass("active")){var r=o.prev().length>0?o.prev().data("tabid"):o.next().data("tabid");showTab(r)}return o.remove(),$("#mainTab"+e).remove(),size(),!0}function replaceUrl(e){var t=$("#frameNav").data("taburl")||{},a=$("#frameNav  li.active").data("tabid"),n=$("#mainFrame"+a).data("src")||$("#mainFrame"+a).attr("src"),i=t[n];if(i){var o=i.split(",");o.splice($.inArray(n,o),1),0==o.length?delete t[n]:t[n]=o.join(",")}t[e]?t[e]=t[e]+","+a:t[e]=""+a,$("#frameNav").data("taburl",t),$("#mainFrame"+a).data("src",e)}function size(){var e=$("#frameNav"),t=$("#frameNav li");t.removeClass("average").css("width","auto");var a=t.height()-parseFloat(t.find("a").css("border-bottom-width")),n=e.height();if(n>a){var i=t.length;t.addClass("average").css("width",parseInt(e.width()/i))}}function showThisTab(e,t){e=e.replace("mainFrame",""),$("#frameNav li[data-tabid="+e+"] a").text(t).attr("title",t),size()}function isExistTab(e){var t=$("#frameNav").data("taburl")||{},a=!1;return t[e]&&(a=t[e].split(",")[0]),a}function allowAddTab(){var e=10;return $("#frameNav  li").length<e}var ydl={};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[　\s]+|[　\s]+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^[　\s]+/,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/[　\s]+$/,"")}),String.prototype.delSpace=function(){return this.replace(/[　\s]/g,"")},String.prototype.length2=function(){return this.replace(/[^\x00-\xff]/g,"..").length},String.prototype.toDate=function(){if(!this)return null;var e=Date.parse(this.replace(/-/g,"/").replace(/^(\d{4})(\d{2})(\d{2})$/,"$1/$2/$3"));return isNaN(e)?null:new Date(e)},function(e,t,a){function n(e,a,n,i,o){var r=[];if(t.isArray(e)){a=a||"text",n=n||"value";for(var l=0,s=e.length;l<s;l++)r.push(o(e[l][n],e[l][a],i(e[l][n]),l))}else if("object"==typeof e){var d=0;for(var c in e)r.push(o(c,e[c],i(c),d)),d++}return r.join("")}e.contexPath=function(){if(window.pageData&&pageData.contexPath)return pageData.contexPath;var e=t('meta[name="contexPath"]');if(e.length>0)return e.attr("content");var n=location.pathname.split("/")[1];return n===a||0==n.length?"":"/"+n}(),e.common={isIe:/Trident/.test(navigator.userAgent),keys:{A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadDot:110,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Left:37,Up:38,Right:39,Down:40,PageUp:33,PageDown:34,End:35,Home:36,NumPadAdd:107,NumPadSubtract:109,NumPadDivide:111,NumPadMultiplay:106,NumLock:144,Enter:13,Esc:27,Tab:9,Backspace:8,Delete:46,Slash:191,Quote:222,Space:32},blankOption:'<option value="">请选择...</option>'},e.uuid=function(e){if(e){var t,a=[],n="0123456789abcdef";for(t=0;t<36;t++)a[t]=Math.floor(16*Math.random());for(a[14]=4,a[19]=3&a[19]|8,t=0;t<36;t++)a[t]=n.charAt(a[t]);return a[8]=a[13]=a[18]=a[23]="-",a.join("")}return(new Date).getTime()},e.formatDate=function(t,a){var n={M:String(t.getMonth()+1),d:String(t.getDate()),H:String(t.getHours()),h:String(t.getHours()<13?t.getHours():t.getHours()-12),m:String(t.getMinutes()),s:String(t.getSeconds())};a=a||"yyyy-MM-dd HH:mm:ss";for(var i in n)a=a.replace(new RegExp(i+i,"g"),("0"+n[i]).substring(n[i].length-1)).replace(new RegExp(i,"g"),n[i]);return a=a.replace(/E/g,"日一二三四五六".charAt(t.getDay())).replace(/aa/g,t.getHours()<12?"上午":"下午").replace(/a/g,t.getHours()<12?"AM":"PM").replace(/yyyy/g,t.getFullYear()).replace(/yy/g,(""+t.getFullYear()).substring(2)).replace(/SSS/g,e.pad(t.getMilliseconds(),3)).replace(/S/g,t.getMilliseconds())},e.today=function(){return e.formatDate(new Date,"yyyy-MM-dd")},e.isLeapYear=function(e){return e instanceof Date?e=e.getFullYear():"string"==typeof e&&(e=e.substr(0,4)),e%4==0&&e%100!=0||e%400==0},e.dateAdd=function(t,a,n){if(n||(n="d"),"string"==typeof t&&(t=t.toDate()),!t)return NaN;var i=t.getFullYear(),o=t.getMonth(),r=t.getDate();switch(n.toLowerCase()){case"y":29!=r||1!=o||e.isLeapYear(i+a)||(r=28),t=new Date(i+a,o,r);break;case"m":var l=new Date(i,o+a+1,0).getDate();t=new Date(i,o+a,r>l?l:r);break;case"d":t=new Date(i,t.getMonth(),r+a)}return e.formatDate(t,"yyyy-MM-dd")},e.dateDiff=function(e,t,a){switch(a||(a="d"),"string"==typeof e&&(e=e.toDate()),"string"==typeof t&&(t=t.toDate()),a.toLowerCase()){case"y":return t.getFullYear()-e.getFullYear();case"m":return 12*(t.getFullYear()-e.getFullYear())+t.getMonth()-e.getMonth();case"d":return(t.getTime()-e.getTime())/864e5}},e.pad=function(e,t,n,i){n=n===a?"0":n;var o=(e+="").length2();if(i)for(;o++<t;)e+=n;else for(;o++<t;)e=n+e;return e},e.matchArray=function(e,t,a,n){if(!t)return n?"":null;for(var i=0;i<t.length;i++)if(t[i][a]==e)return n?t[i]?t[i][n]:"":t[i];return n?"":null},e.sort=function(e,t,a){var n=[].concat(e);switch(typeof t){case"string":return a?n.sort(function(e,a){return e[t]==a[t]?0:a[t]>e[t]?1:-1}):n.sort(function(e,a){return e[t]==a[t]?0:a[t]<e[t]?1:-1});case"function":return a?n.sort(function(e,a){return t(a)==t(e)?0:t(a)>t(e)?1:-1}):n.sort(function(e,a){return t(a)==t(e)?0:t(a)<t(e)?1:-1});default:return"boolean"==typeof t&&(a=t),a?n.sort(function(e,t){return e==t?0:t>e?1:-1}):n.sort()}},e.timer={duration:{},start:function(){var t=e.uuid();return this.duration[t]=new Date,t},output:function(e){return this.duration[e]?new Date-this.duration[e]:""},stop:function(e){if(this.duration[e]){var t=new Date-this.duration[e];return delete this.duration[e],t}}},e.getElementById=function(e,t){return"string"==typeof e?(t||window).document.getElementById(e):e},e.getElementsByName=function(e,t){return"string"==typeof e?(t||window).document.getElementsByName(e):e},e.getElementsByTagName=function(e,t){return"string"==typeof e?(t||window).document.getElementsByTagName(e):e},e.go=function(e,t){(t||window).location.href=e},e.getDom=function(t){var n=e.getElementById(t);return n?n instanceof jQuery?n.get():n:a},e.getInputsArray=function(n,i){"boolean"==typeof n&&(i=n,n=a);var o=i?"":":enabled",r=n===a?t(":input[name]"+o+":not(.fixtable-body :input,.datalist-editor-dialog :input)"):t(e.getDom(n)).find(":hidden[name],:input[name]"+o),l=[];return r.each(function(){if(t.inArray(this.type,["text","hidden","textarea","select-one","password"])>=0||t.inArray(this.type,["checkbox","radio"])>=0&&this.checked)l.push({name:this.name,value:this.value});else if("select-multiple"===this.type)for(var e=0;e<this.options.length;e++)this.options[e].selected&&l.push({name:this.name,value:this.options[e].value})}),l},e.getInputs=function(n,i){var o={};return t.each(e.getInputsArray(n,i),function(e,t){o[t.name]===a?o[t.name]=t.value:o[t.name]+=","+t.value}),o},e.ajax=function(n,i,o,r){r=t.extend({url:n,async:!0,method:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",dataType:"json",timeout:18e5,cache:!1,silent:!1},r);var l={timeout:"读取服务器响应数据超时",error:"网络或服务器异常导致请求发送失败，请重试",abort:"请求操作已中止，请重试",parsererror:"服务器返回的数据格式不正确，浏览器无法解析"},s=t.Deferred();return r=t.extend(r,{data:"application/json"===r.contentType?JSON.stringify(i):i,error:function(t,a,n){var i=(l[a]||a)+"\n"+n;r.handleError?(r.handleError(null,"YDP03001",i),s.reject(a)):r.silent?s.reject(a):e.alert({message:"对不起，系统出错了！",desc:(l[a]||a)+"\n\n"+n},function(){s.reject(a)})},success:function(t,n,i){t.returnCode&&0!=t.returnCode?"TIMEOUT"==t.returnCode?e.alert(t.message?{message:"提示信息",desc:t.message}:"登录超时，请重新登录！",function(){s.reject(t.message,t.returnCode,t)}):r.handleError?(r.handleError(t,t.returnCode,t.message),s.reject(t.message,t.returnCode,t)):!r.silent&&t.message!==a&&t.message.length>0?e.alert({message:"提示信息",desc:(r.errorCode&&r.errorCode[t.returnCode]!==a?r.errorCode[t.returnCode]:t.message)||"",code:t.returnCode},function(){s.reject(t.message,t.returnCode,t)}):s.reject(t.message,t.returnCode,t):(o&&o(t.data?t.data:t,t),s.resolve(t))}}),t.ajax(r),s.promise()},e.createOptions=function(e,t,a,i){return n(e,t,a,function(e){return e==i},function(e,t,a){return'<option value="'+e+'"'+(a?' selected="selected"':"")+">"+t+"</option>"})},e.createRadios=function(e,t,a,i,o,r){return i||(i=""),n(e,t,a,function(e){return e==i},function(e,t,a,n){var i=a?' checked="checked"':"";return r?'<div class="radio"><label><input type="radio" id="'+o+":"+n+'" name="'+o+'" value="'+e+'"'+i+" />"+t+"</label></div>":'<label class="radio-inline"><input type="radio" id="'+o+":"+n+'" name="'+o+'" value="'+e+'"'+i+" />"+t+"</label>"})},e.createCheckboxes=function(e,a,i,o,r,l){return o||(o=""),o=o.split(","),n(e,a,i,function(e){return t.inArray(e,o)>=0},function(e,t,a,n){var i=a?' checked="checked"':"",o=r?' id="'+r+":"+n+'" name="'+r+'"':"";return l?'<div class="checkbox"><label><input type="checkbox"'+o+' value="'+e+'"'+i+" />"+t+"</label></div>":'<label class="checkbox-inline"><input type="checkbox"'+o+' value="'+e+'"'+i+" />"+t+"</label>"})},e.selectByValue=function(n,i){if(!n)return-1;if(n=e.getDom(n),i=i?(""+i).trimRight():"",n instanceof Array){for(var o=-1,r=0;r<n.length;r++)o=e.selectByValue(n[r],i);return o}if(n.tagName&&"SELECT"==n.tagName){for(var l=-1,s=n.options,r=0,d=s.length;r<d;r++)if(s[r].value!==a&&s[r].value.trimRight()==i){s[r].selected=!0,l=r;var c=t(n).prev().find("input.combobox");c.length>0&&(c.val(t(s[r]).text()),t(n).prev().find("input[type=hidden]").val(s[r].value));break}return l==-1&&lo("ydl.selectByValue：列表"+(n.id||"")+'中未找到值"'+i+'"',"orange"),l}if(n.type&&"hidden"===n.type){var u=t(n).parent();return u.hasClass("combobox-container")?e.selectByValue(u.next(),i):ll("ydl.selectByValue出错：指定的对象不是select",-1)}return ll("ydl.selectByValue出错：指定的对象不是select",-1)},e.string=function(e,t){return new Array(parseInt(t)+1).join(" ").replace(/ /g,e)},t.fn.getCell=function(a,n){try{if("TR"===this[0].tagName){var i;if("string"==typeof a){var o=this.closest("table").find("thead tr:last"),r=o.find("th._"+a).index();if(!(r>=0))return null;i=this.find("td:eq("+r+")")}else i=t(this[0].cells[a]);return n?i.find(n):i}return e.log("$.fn.getCell出错：该方法只能针对表格行使用","red"),null}catch(l){return e.log("$.fn.getCell出错："+e.error(l),"red"),null}},t.fn.addButton=function(e,a,n){var i,o,r;t.isPlainObject(n)?(i=n.id,o=n.icon?'<span class="glyphicon glyphicon-'+n.icon+'"></span> ':"",r=n.theme||"default"):(i=n,o="",r="default");var l=this.length>1||!i?"":' id="'+i+'"';return this.each(function(){var n=t(this);if(n.hasClass("datalist-table-body"))t('<button class="btn btn-'+r+'" type="button"'+l+">"+o+e+"</button>").click(function(){t.isFunction(a)&&a.call(n[0],n[0])}).prependTo(n.closest(".fixtable-box").prev().children("div"));else if(n.hasClass("ydpx-container"))0===n.children(".panel-heading").children(".btn-group").length&&n.children(".panel-heading").append('<div class="ydpx-container-buttons btn-group btn-group-sm pull-right"></div>'),t('<button class="btn btn-'+r+'" type="button"'+l+">"+o+e+"</button>").click(function(){t.isFunction(a)&&a.call(n[0],n[0])}).prependTo(n.children(".panel-heading").children(".btn-group"));else{var i=t('<button class="btn btn-'+r+' btn-sm" type="button"'+l+">"+o+e+"</button>").click(function(){t.isFunction(a)&&a.call(n[0],n[0])}).wrap('<span class="input-group-btn"></span>').parent(),s=n.parent();s.hasClass("input-group")||(s=s.children().wrapAll('<div class="input-group input-group-sm"></div>').parent()),s.append(i)}}),this},e.getMember=function(a){var n=t.type(a);if("object"==n||"array"==n){if(a.nodeType||t.isWindow(a))return String(a);var i=arguments.length>1?++arguments[1]:1;if(i>10)return"...";var o="    ",r=e.string(o,i-1),l="";if("array"===n){for(var s=0,d=a.length;s<d;s++)l+=o+r+s+": "+e.getMember(a[s],i)+"\n";return"[\n"+l+r+"]"}for(var c in a)l+=o+r+c+": "+e.getMember(a[c],i)+"\n";return"{\n"+l+r+"}"}if(t.isFunction(a)){var u=String(a);return u.substring(0,u.indexOf("{"))+"{...}"}return"string"===n?'"'+a+'"':String(a)},e.log=function(e){return window.console&&console.log(e),e},e.cookie=function(a,n,i){if(arguments.length>1&&(null===n||"object"!=typeof n)){if(i=t.extend({expires:365,domain:location.hostname,path:e.contexPath},i),null===n&&(i.expires=-1),"number"==typeof i.expires){var o=i.expires,r=i.expires=new Date;r.setDate(r.getDate()+o)}return document.cookie=[encodeURIComponent(a),"=",i.raw?String(n):encodeURIComponent(String(n)),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=n||{};var l=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie);return l?i.raw?l[1]:decodeURIComponent(l[1]):null},e.localData=function(e,t,n){if(window.localStorage&&window.sessionStorage)return null===t?(n?window.sessionStorage.removeItem(e):window.localStorage.removeItem(e),null):t===a?n?window.sessionStorage.getItem(e):window.localStorage.getItem(e):(n?window.sessionStorage.setItem(e,t):window.localStorage.setItem(e,t),t);var i=top.document.documentElement;return i.addBehavior("#default#userdata"),null===t?(i.removeAttribute("value"),i.save(e),null):t===a?(i.load(e),i.getAttribute("value")):(i.setAttribute("value",t),i.save(e),t)},e.sessionData=function(t,a){return e.localData(t,a,!0)},e.getStyle=function(e,t){var a;return a=e.currentStyle?e.currentStyle:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,""):e.style,t?a[t]:a},e.addComma=function(e){return e+="",e.indexOf(",")==-1?e.split("").reverse().join("").replace(/(\d{3})(?!\d*\.\d+)/g,"$1,").split("").reverse().join("").replace(/^(-?),/,"$1"):e},e.delComma=function(e){return(e+"").replace(/,/g,"")},e.capitalMoney=function(t,n){if(""===t)return"";if(t="number"==typeof t?t.toFixed(2):parseFloat(e.delComma(t.replace(/￥/g,""))).toFixed(2),t=t.replace(".",""),"000"==t)return"零元整";for(var i="零壹贰叁肆伍陆柒捌玖",o="分角元拾佰仟万拾佰仟亿拾佰仟万拾佰仟",r="",l=0;l<t.length;l++)r+=i.substr(t.substr(l,1)-"0",1)+o.substr(t.length-l-1,1);if(n||n===a){var s=function(e){return e.replace("零亿","亿").replace("零万","万").replace("零仟","零").replace("零佰","零").replace("零拾","零")},d=function(e){for(;e.indexOf("零零")>=0;)e=e.replace("零零","零");return e};r=s(d(s(r.replace("零角","零").replace("零分","零")))),r=d(s(r.replace("亿万","亿零").replace("零万","零"))).replace("零元","元"),"零"==r.charAt(r.length-1)&&(r=r.substr(0,r.length-1)+"整")}return r},e.getCheckedRadio=function(e){for(var a="string"==typeof e?document.getElementsByName(e):e instanceof jQuery?e.get():e,n=0;n<a.length;n++)if(a[n].checked)return{index:n,value:a[n].value,text:t(a[n]).parent().text()};return{index:-1,value:"",text:""}},e.getCheckedCheckbox=function(e){for(var a="string"==typeof e?document.getElementsByName(e):e instanceof jQuery?e.get():e,n=[],i=0;i<a.length;i++)a[i].checked&&n.push({index:i,value:a[i].value,text:t(a[i]).parent().text()});return n},e.setCheckedCheckbox=function(e,a){"string"==typeof a&&(a=a.split(","));var n=[];return t("input[name="+e+"]").each(function(){t.inArray(this.value,a)>=0?(this.checked=!0,n.push(this)):this.checked=!1}),n},e.setCheckedRadio=function(e,t){for(var a=document.getElementsByName(e),n=0;n<a.length;n++){var i=a[n];if(i.value==t)return i.checked=!0,i}return null},e.getSelectTextByValue=function(a,n){return a=e.getDom(a),a?t('option[value="'+n+'"]',a).text().trim()||n:n},e.selectByText=function(a,n){if(a=e.getDom(a),a instanceof Array){for(var i=-1,o=0;o<a.length;o++)i=arguments.callee(a[o],n);return i}if(a.tagName&&"SELECT"==a.tagName){var r=-1,l=a.options;n=n?(""+n).trimRight():"";for(var o=0,s=l.length;o<s;o++)if(t(l[o]).text().trimRight()==n){l[o].selected=!0,r=o;var d=t(a).next();d.is(".ui-autocomplete-input")&&d.val(t(l[o]).text());break}return r==-1&&e.log("ydl.selectByText：列表"+(a.id||"")+'中未找到文本"'+n+'"',"orange"),r}e.log("ydl.selectByText出错：指定的对象不是select","red")},t.fn.selectByText=function(t){return e.selectByText(this,t),this},e.attr=function(n,i,o){var r=e.getDom(n);if(r||"string"!=typeof n||(r=$n(n)),!r)return e.log("ydl.attr出错：找不到指定的表单对象","red"),null;if(1!=r.length||r instanceof HTMLSelectElement){if(r.length>1&&!(r instanceof HTMLSelectElement))return t.each(r,function(){e.attr(this,i,o)}),r}else r=r[0];"array"===t.type(r)&&1===r.length&&(r=r[0]),i=i.toLowerCase(),o=o||o===a;var l=r.tagName.toLowerCase(),s=r.type,d=t(r),c=d.closest("table").hasClass("datalist-table-body"),u=o?"addClass":"removeClass";"input"===l||"textarea"===l?"radio"===s||"checkbox"===s?"readonly"===i||"disabled"===i?d.closest(".multivalue").find(":input").prop("disabled",o):"hidden"===i?((c?d.closest("td").children():d.closest(".col"))[u]("hide"),o||c||d.closest(".input-group").removeClass("hide"),r.id&&t("label[for="+r.id.replace(/:/g,"\\:")+"],label[for="+r.id.replace(/:.+/,"")+"]")[u]("hide")):"required"===i&&(d.closest(".multivalue").data("required",o),c||d.closest(".col")[u]("star")):"readonly"===i||"disabled"===i?(r.readOnly=o,d.hasClass("date")&&d.datepicker(),d.hasClass("money")&&(d.next()[0].readOnly=o)):"hidden"===i?((c?d.closest("td").children():d.closest(".col"))[u]("hide"),o||c||d.closest(".input-group").addBack().removeClass("hide"),r.id&&t("label[for="+r.id.replace(/:/g,"\\:")+"]")[u]("hide"),d.hasClass("money")&&d.next()[u]("hide")):"required"===i&&(c||d.closest(".col")[u]("star"),d.attr("required",o)):"select"===l?"readonly"===i||"disabled"===i?(r.disabled=o,d.hasClass("combobox")&&d.combobox(o?"disable":"enable")):"hidden"===i?((c?d.closest("td").children():d.closest(".col"))[u]("hide"),o||c||d.closest(".input-group").addBack().removeClass("hide"),r.id&&t("label[for="+r.id.replace(/:/g,"\\:")+"]")[u]("hide")):"required"===i&&(c||d.closest(".col")[u]("star"),d.attr("required",o)):"button"===l&&("readonly"===i||"disabled"===i?window.pageData&&pageData.buttonAccess&&pageData.buttonAccess[r.id]&&!pageData.buttonAccess[r.id].access?r.disabled=!0:r.disabled=o:"hidden"===i&&d[u]("hide")),"required"!==i||o||(e.validator.clear(d.closest(".multivalue")),e.validator.clear(d))},e.removeAttr=function(t,a){return e.attr(t,a,!1)},e.getLabel=function(n,i){var o="",r=e.getDom(n);if(r===a)return document.getElementsByName(n).length>0&&(o=t("label[for="+n+"]").text()),o.replace(/[:：]$/g,"")||i||"";if(r instanceof Array&&0==r.length)return i||"";r instanceof Array&&(r=r[0]),i=i||r.id||"";var l=r.parentNode;if("TD"==l.tagName&&t(l).closest("table").hasClass("datalist-table-body"))try{var s=t(l.parentNode);o=s.closest("table").find("thead>tr:first").children(":eq("+s.children().index(l)+")").text().trim().replace(/\*$/,"")}catch(d){e.log("ydl.getLabel出错：获取标签失败"+e.error(d),"red"),o=""}else o=t(r).is("fieldset")?t('label[for="'+r.id.replace(/:/g,"\\:").replace("group_","")+'"]').text():t('label[for="'+r.id.replace(/:/g,"\\:")+'"]').text();return""==o?i:o.replace(/[:：]$/g,"")},e.getValue=function(a,n,i){if("boolean"==typeof n){var o=n;n=i,i=o}var r,l=e.getDom(a);if(l instanceof Array&&(l=l[0]),l)r="select-one"===l.type||"select-multiple"===l.type?t("option:selected",l).map(function(){if(i){var e=this.innerHTML.trim();return""===this.value&&"请选择..."===e?"":e}return this.value}).get().join(","):i&&t(l).hasClass("money")?t(l).next(".money-display").val():l.value;else if("string"==typeof a){var s=t("#group_"+a);if(s.hasClass("multivalue")){var d=t("[name="+a+"]:checked");r=d.map(function(){return i?t(this).parent("label").text():this.value}).get().join(",")}}return r||n||""},e.setValue=function(a,n){var i=e.getDom(a);return!i&&"string"==typeof a&&t("#group_"+a).hasClass("multivalue")&&(i=document.getElementsByName(a)),t(i).filter(":input:not(button)").each(function(a,i){var o=t(i);if(o.closest("table").hasClass("ydpx-datalist")){i.value=n;var r=n,l=o.parent();l.hasClass("money")&&(r=parseFloat(n),r=isNaN(r)?"":e.addComma(r.toFixed(o.data("declen")||2)),o.next().val(r)),"hidden"===i.type&&l.children("span").text(r)}else{var s=o.data("yd-widget");if(s&&o[s]("hasMethod","setValue"))o[s]("setValue",n);else if("radio"===i.type||"checkbox"===i.type)i.checked=t.inArray(i.value,n.split(","))!=-1;else if(o.hasClass("money")){var r=parseFloat(n);r=isNaN(r)?"":e.addComma(parseFloat(n).toFixed(o.data("declen")||2)),o.val(n).next().val(r)}else o.hasClass("combobox")||o.parent().hasClass("combobox-container")?e.selectByValue(i,n):o.val(n)}}),i},t.fn.setValue=function(t){return e.setValue(this,t),this},e.setHighlight=function(a,n){var i=e.getDom(a);!i&&"string"==typeof a&&t("#group_"+a).hasClass("multivalue")&&(i=document.getElementsByName(a)),t(i).filter(":input").each(function(e,a){var i=t(a);if("BUTTON"==a.tagName)i.toggleClass("btn-highlight",0!=n);else{var o=i;"radio"===a.type||"checkbox"===a.type?o=i.closest("fieldset"):(i.hasClass("money")||i.hasClass("combobox")||i.parent().hasClass("combobox-container"))&&(o=i.parent()),o.toggleClass("highlight",0!=n)}})},e.arr2obj=function(e,a,n){var i={};if(t.isFunction(n))for(var o=0;o<e.length;o++)i[e[o][a]||o]=n(e[o],o);else for(var o=0;o<e.length;o++)i[e[o][a]||o]=e[o][n];return i},e.obj2arr=function(e,t,n){t===a&&(t="key"),n===a&&(n="value");var i=[];for(var o in e){var r={};r[t]=o,r[n]=e[o],i.push(r)}return i},e.arr2arr=function(e,n){n===a&&(n="value");var i=[];if(t.isFunction(n))for(var o=0;o<e.length;o++)i.push(n(e[o],o));else for(var o=0;o<e.length;o++)i.push(e[o][n]);return i},e.deferred=function(e){for(var a=t.isArray(e)?e:arguments,n=[],i=0;i<a.length;i++){var o=a[i];if(t.isFunction(o.promise))n.push(o);else if(t.isFunction(o)){var r=o();r?n.push(t.Deferred().resolve()):n.push(t.Deferred().reject())}else"boolean"==typeof o?o?n.push(t.Deferred().resolve()):n.push(t.Deferred().reject()):n.push(t.Deferred().resolve())}return t.when.apply(null,n)},t.fn.buttonText=function(e){return this.each(function(){var a=t(this);if(a.is("button")){var n=a.html();n=n.replace(/^(<span.+?<\/span>)?.+?(<span.+?<\/span>)?$/,"$1"+e+"$2"),a.html(n)}})},e.error=function(t,a){if("string"==typeof t)return t;switch(a=a||"message",a.toLowerCase()){case"message":return t.message||t.description;case"all":return e.getMember(t);default:return t[a]}},e.render=function(e,t){if(!e)return"";"object"!=typeof t&&(t=Array.prototype.slice.call(arguments,1));var a=0;return e.replace(/\$?\$\{(.*?)\}/g,function(e,n){return 0===e.indexOf("$$")?e.substr(1):t[""===n?a++:n]||""})},e.idCardInfo=function(t){if(!t)return null;if(!e.validator.get("idcard")(t,{type:"idcard"}))return null;var a=18==t.length?t.substr(6,4):"19"+t.substr(6,2),n=t.substr(18==t.length?10:8,2),i=t.substr(18==t.length?12:10,2),o=a+"-"+n+"-"+i,r=window.poolSelect&&poolSelect.CURRENT_SYSTEM_DATE||e.today(),l=e.dateDiff(o,r,"y");e.dateDiff(e.dateAdd(o,l,"y"),r,"d")<0&&l--;var s={birthdate:o,age:l,sex:parseInt(t.substr(18==t.length?16:14,1))%2==0?2:1};return s},t.fn.bgiframe=/Trident/.test(navigator.userAgent)?function(e){function a(e){return e&&e.constructor===Number?e+"px":e}e=t.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"about:blank"},e);var n='<iframe class="bgiframe" frameborder="0" tabindex="-1" src="'+e.src+'"style="display:block; position:absolute; z-index:-1;'+(e.opacity!==!1?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==e.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth) || 0) * -1) + 'px')":a(e.top))+";left:"+("auto"==e.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth) || 0) * -1) + 'px')":a(e.left))+";width:"+("auto"==e.width?"100%":a(e.width))+";height:"+("auto"==e.height?"100%":a(e.height))+';"/>';return this.each(function(){t(this).prepend(n)})}:function(){return this}}(ydl,jQuery);var $$=ydl.getElementById,$n=ydl.getElementsByName,$t=ydl.getElementsByTagName,lo=ydl.log,lm=function(e){return ydl.log(ydl.getMember(e)),e},ll=function(e,t){return ydl.log(e+": "+ydl.getMember(t)),t};!function(e,t){function a(a){if(e.common.isIe){var n,i,o,r=pageData.poolSelect.$page;if(r&&/\/frameset$/.test(r)&&"/ish"==pageData.contexPath){if(o=t("#printDiv",t("#mainWrap .tab-pane.active iframe")[0].contentWindow.document),0==o.length)return;n=o.children("iframe")[0].contentWindow.document.getElementsByTagName("object"),i=t("object",o.children("iframe")[0].contentWindow.document),t(".layui-layer-shade:eq(-1) .bgiframe").length<1&&(t(".layui-layer-shade").bgiframe(),t(".bgiframe").css({"z-index":"0"}).css({"z-index":"-1"}))}else n=document.getElementsByTagName("object"),i=t("object"),o=t("#printDiv");if(0==n.length&&0==o.length)return;o.length>0&&(i=o),0==a&&0==i.closest(".modal").length?i.hide().addClass("hide"):0==t(".layui-layer.modal:visible:not(.layui-layer-loading)").length&&i.show().removeClass("hide")}}e.dialog={},layer.config({skin:"modal",zIndex:1050}),e.dialog.open=function(e,a,n,i){i||(i={});var o=t("<div></div>"),r=t.extend(i,{type:2,autoOpen:!0,content:e,close:!0,shown:function(e,t){i.open&&i.open();var a=window[e.find("iframe")[0].name];o.dialog("option","title",a.document.title)},hidden:function(){try{delete window.modalDialogArguments}catch(e){window.modalDialogArguments=null}var t=o.data("callbackArguments");n&&n.apply(this,t),o.dialog("destroy")}});o.dialog(r),window.modalDialogArguments={dialogArgs:a,dialogHandler:o,dialogCallback:n}},e.dialog.arguments=function(){return parent.modalDialogArguments.dialogArgs},e.dialog.close=function(){var e=parent.modalDialogArguments;e?(e.dialogHandler.data("callbackArguments",arguments),e.dialogHandler.dialog("close")):(top.close(),parent.dialogArguments.dialogCallback&&parent.dialogArguments.dialogCallback.apply(this,arguments))},e.makeDialog=function(e,a){var e=t.map(e.split(","),function(e){return"#"+e.trim()}).join(",");return a=t.extend({title:"对话框",size:"lg",autoOpen:!1,modal:!0},a||{}),t("<div></div>").append(t(e)).dialog(a)},e.detailDialog=function(e){e||(e={});var a="",n='<span class="yd-icon '+(e.icon||"info")+'"></span>',i='<h2 class="'+("pay"==e.icon||"ask"==e.icon||"common"==e.icon?"":"yd-message")+'">'+(e.message||"")+"</h2>",o=e.desc?e.desc:"",r="";return e.list&&!t.isEmptyObject(e.list)&&(r+='<table class="table table-hover table-bordered yd-list">'+(e.list.title?"<caption>"+e.list.title+"</caption>":"")+"<thead><tr>",t.each(e.list.head||[],function(e,t){r+="string"==typeof t?"<th><label>"+t+"</label></th>":'<th data-id="'+t.id+'"><label>'+t.text+"</label></th>"}),r+="</tr></thead><tbody>",t.each(e.list.body||[],function(a,n){r+="<tr>",t.isPlainObject(n)?t.each(e.list.head||[],function(e,t){r+='<td data-id="'+t.id+'">'+n[t.id]+"</td>"}):t.each(n,function(e,t){r+="<td>"+t+"</td>"}),r+="</tr>"}),r+="</tbody></table>"),a=e.html&&e.html.length>0?e.html:'<div class="yd-detail-dialog">'+n+i+(o?'<div class="yd-desc">'+o+"</div>":"")+r+"</div>"},e.customDialog=function(a){a=t.extend({buttons:a.buttons||[{text:"确定",theme:"primary",value:0},{text:"取消",value:1}]},a||{});var n=t(e.detailDialog({html:a.html||"",message:a.message||a.title,desc:a.desc||a.text,icon:a.icon||"",size:a.size||"",list:a.list||{}})),i=a.title||!1;a=t.extend(a,{autoOpen:!0,close:!1,title:!1}),a.html&&(a.title=i),a.shown=function(e){t.isFunction(a.open)&&a.open.call(e,e.find(".layui-layer-content")),a.focus!==!1&&e.find(".layui-layer-btn a:eq("+(a.focus||0)+")").focus()};var o=a.hidden||!1;a.hidden=function(e){o&&o(),t(e).remove()},n.appendTo("body").dialog(a)},e.alert=function(a,n){var i="",o="",r="";"string"==typeof a||"number"==typeof a?(r="info",i=a):(r=a.icon||(void 0!==a.code?"error":"info"),i=a.message||"",o=(a.code?"<b>错误码：</b>"+a.code+"<br>":"")+(a.desc?"<b>详细信息：</b>"+a.desc:""));var l=0!=a.copy?"复制信息,确定":"确定";e.customDialog({shade:void 0!=a.shade?a.shade:.3,title:!1,width:a.width||!1,height:a.height||!1,close:!1,spaceClose:!0,text:"",message:i,desc:o,icon:r,buttons:l,closeBtn:1,focus:0!=a.copy?1:0,callback:function(e){if(0!=a.copy&&0==e)return!1},hidden:function(){t.isFunction(n)&&n()},open:function(n){if(a.open&&a.open(n),0!=a.copy){var i=[];i.push("标题："+n.find("h2").text()),t.each(n.find("p"),function(){i.push(t(this).text())}),window.poolSelect&&poolSelect._OPERID&&poolSelect._OPERNAME&&i.push("操作人："+poolSelect._OPERID+"-"+poolSelect._OPERNAME),i.push("操作日期："+e.formatDate(new Date));var o=t(this).find('.layui-layer-btn a[value="0"]').attr("data-clipboard-text",i.join("\n"))[0];/Trident/.test(navigator.userAgent)&&t(o).click(function(){t("<div></div>").dialog("open").dialog("close").remove()}),t.getScript(e.contexPath+"/common/lib/js/clipboard.min.js",function(){new Clipboard(o).on("success",function(e){t(e.trigger).text("已复制到剪贴板")})})}},shadeClose:void 0==a.shadeClose||a.shadeClose})},e.toast=function(t,a,n){return 0==t?void layer.close(e.toast.index):void(a?(a.icon||(a.skin="layui-layer-hui"),n?e.toast.index=layer.msg(t,a,n):e.toast.index=layer.msg(t,a)):e.toast.index=layer.msg(t,{skin:"layui-layer-hui"}))},e.toolTips=function(t,a,n){n&&(a.end=n),a.dom=e.getDom(a.dom),layer.tips(t,a.dom,a)},e.loading=function(a,n,i){if(0==a)layer.close(e.loading.index);else if("close"==a)layer.close(n);else{if(void 0==n&&(n=0),void 0==i&&(i={}),i.dom){var o=t(e.getDom(i.dom)),r=o.offset();i.area=[o.width()+"px",o.height()+"px"],i.offset=[r.top+"px",r.left+"px"]}i.success=function(a,n){var o=pageData.poolSelect.$page;o&&/\/frameset$/.test(o)&&"/ish"==pageData.contexPath?(e.common.isIe&&t("#mainWrap .tab-pane.active iframe")[0].contentWindow.$("#printDiv > iframe")[0].contentWindow.document.getElementsByTagName("object").length>0&&a.find(".layui-layer-content").bgiframe(),
i.shown&&i.shown(a,n)):(e.common.isIe&&document.getElementsByTagName("object").length>0&&a.find(".layui-layer-content").bgiframe(),i.shown&&i.shown(a,n))},i.end=function(){i.hidden&&i.hidden()},e.loading.index=layer.load(n,i)}},e.confirm=function(a){var n="string"==typeof a?a:a.message,i=t.Deferred();return e.customDialog(t.extend(a,{icon:"ask",message:n,callback:function(e){0==e?i.resolve():i.reject()}})),i.promise()},t.fn.dialog=function(n,i,o){function r(t){var a={12:[360,650,900],14:[370,720,1020],16:[380,790,1130],18:[390,850,1200]},n=e.userConfig?e.userConfig.get("base_font_size")||12:12;t.area=a[n][1]+"px",t.size&&("lg"==t.size?t.area=a[n][2]+"px":"sm"==t.size&&(t.area=a[n][0]+"px")),t.width&&(t.area=(t.width+"").indexOf("px")>0?t.width:t.width+"px"),t.height&&(t.height=(t.height+"").indexOf("px")>0?t.height:t.height+"px",t.area=[t.area,t.height])}if(n&&n.dialogVersion||"scroll"==this.data("dialog-func"))return this.dialogScroll(n,i,o).data("dialog-func","scroll");var l=this;if("string"==typeof n){var s=this.data("dialog-index");if("open"==n){var d=this.data("dialog-options");r(d),d.show&&d.show(),layer.open(d)}if("close"==n&&layer.close(s),"destroy"==n&&this.remove(),"option"==n){var c=this.data("dialog-options");c[i]=o,this.data("dialog-options",c),"title"==i&&layer.title(o,s)}return"style"==n&&layer.style(s,i),this}if(void 0!=this.data("dialog-inited"))return this;if(t("body").append(this.hide()),this.data("dialog-inited",!0),n=t.extend({title:"对话框",type:1,resize:!1,content:t(l),maxHeight:document.documentElement.clientHeight-30},n||{}),!n.id){var u=t("body").data("dialogIndex")||1;n.id="_dialog_"+u,t("body").data("dialogIndex",parseInt(u)+1)}if(n.area||r(n),0==n.close&&(n.closeBtn=!1),void 0!=n.closeOnEscape&&(n.shadeClose=n.closeOnEscape),n.closeButton&&(n.cancel=function(e,t){var a=n.closeButton(t,e);if(0==a)return!1}),n.end=function(){n.hidden&&n.hidden(l),a();var e=l.data("dialog-index");n.spaceClose&&t(document.documentElement).off("keydown.dialogclose"+e),t("body,div").off("scroll.dialogscroll"+e)},n.buttons){"string"==typeof n.buttons?n.buttons=t.map(n.buttons.split(","),function(e,t){return{text:e,value:t}}):t.isPlainObject(n.buttons)&&(n.buttons=t.map(n.buttons,function(e,t){return{text:t,click:e}})),n.buttons=t.map(n.buttons,function(e,t){return"string"==typeof e?{text:e,value:t}:(void 0==e.value&&(e.value=t),e)});var f=[];t.each(n.buttons,function(e,a){f.push(a.text);var i=0==e?"yes":"btn"+(e+1);n[i]=function(i,o){var r=!0;return t.isFunction(n.callback)&&(r=n.callback.call(o,a.value,a.text,o.find(".layui-layer-content"))),a.click&&0==a.click(i,o)&&(r=!1),0!=r&&void(0==e&&layer.close(i))}}),n.btn=f}return n.success=function(i,o){a(!1),t("body,div").not(".tips-keep-on-scroll").on("scroll.dialogscroll"+o,function(){t(".datetimepicker").hide()}),n.height&&i.addClass("dialog-height"),n.buttons&&t.each(n.buttons,function(e,t){var a=i.find(".layui-layer-btn a:eq("+e+")").attr("href","#");void 0!=t.value&&a.attr("value",t.value),t.id&&a.prop("id",t.id),t.theme&&a.addClass(t.theme),t.icon&&a.prepend('<span class="glyphicon glyphicon-'+t.icon+'"></span>')}),l.data("dialog-index",o),n.spaceClose&&t(document.documentElement).on("keydown.dialogclose"+o,function(a){t(l).is(":visible")&&a.which==e.common.keys.Space&&(n.spaceCloseFunc&&n.spaceCloseFunc(),layer.close(o),a.preventDefault())}),n.shown&&n.shown(i,o)},n.create&&"function"==typeof n.create&&n.create(this),this.data("dialog-options",n),n.autoOpen&&(n.show&&n.show(),layer.open(n)),this},e.dialog.scroll=function(a){a=t.extend({autoOpen:!0,close:!0},a||{});var n=t(a.html?"<div>"+a.html+"</div>":e.getDom(a.content));n.show().removeClass("hide");var i=n.data("initDom");return void 0!=i?i.dialogScroll("open"):(i=n.dialogScroll(a),n.data("initDom",i)),i},t.fn.dialogScroll=function(e,n,i){var o=this;if("string"==typeof e)return"open"==e&&this.modal({backdrop:this.data("closeOnEscape")||"static",keyboard:this.data("closeOnEscape")}),"close"==e&&this.modal("hide"),"destroy"==e&&this.closest(".modal").remove(),"option"==e&&"title"==n&&this.find("h4.modal-title").html(i),this;if(void 0!=this.data("dialog-inited"))return this;t(this).data("dialog-inited",!0),e=t.extend({title:"对话框"},e||{});var r=e.close?'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">× </button>':"",l=t('<div class="modal fade" data-backdrop="static" '+(e.id?'id="'+e.id+'"':"")+'tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog'+(e.size?" modal-"+e.size:"")+'"><div class="modal-content"><div class="modal-header">'+r+'<h4 class="modal-title">'+e.title+'</h4></div><div class="modal-body"></div></div></div></div>');if(l.find(".modal-body").append(this),t("body").append(l),l.data("closeOnEscape",e.closeOnEscape||!1),e.buttons){var s=t('<div class="modal-footer"></div>');t.each(e.buttons,function(e,a){var n=t('<button type="button" class="btn btn-default">'+e+"</button>");"function"==typeof a&&n.click(function(){a.call(l,o)}),s.append(n)}),l.find(".modal-content").append(s)}return e.create&&"function"==typeof e.create&&e.create(),e.hidden&&l.on("hidden.bs.modal",function(){a(),e.hidden()}),e.shown&&l.on("shown.bs.modal",function(){a(!1),e.shown()}),e.hide&&l.on("hide.bs.modal",function(){e.hide()}),e.show&&l.on("show.bs.modal",function(){e.show()}),e.autoOpen&&l.modal({backdrop:l.data("closeOnEscape")||"static",keyboard:l.data("closeOnEscape")}),l},e.objectShow=a}(window.ydl?ydl:window.ydl={},jQuery),function(e){e.frame={},e.frame.add=function(t,a){function n(e,t){var a=top.addTab(e,t);return a}var i=$.Deferred();if(e.isInFrame()){if(!top.allowAddTab())return e.toast("页签数量已达到上限"),!1;var o=top.isExistTab(t);o&&"true"!=e.sessionData("plat_tab_noinfo")?e.customDialog({title:"确认打开新页签",text:"已打开过此页面，请确认是否再打开另外一个新页签？",buttons:"在新页签中打开,切换到现有页签,取消",open:function(){$(this).find(".layui-layer-btn").append('<label class="pull-left checkbox-inline"><input type="checkbox"> 本次登录不再提示</label>'),$(this).on("change",".layui-layer-btn :checkbox",function(){e.sessionData("plat_tab_noinfo",this.checked)})},callback:function(r){0==r?(e.sessionData("plat_tab_type","0"),i.resolve(n(t,a))):1==r?(e.sessionData("plat_tab_type","1"),top.showTab(o),i.resolve(o)):i.reject()}}):o&&"true"==e.sessionData("plat_tab_noinfo")&&"1"==e.sessionData("plat_tab_type")?(top.showTab(o),i.resolve(o)):i.resolve(n(t,a))}return i.promise()},e.frame.open=function(t){e.isInFrame&&e.isInFrame()&&top.showTab(t)},e.frame.close=function(t){e.isInFrame&&e.isInFrame()&&top.delTab(t)},e.isInFrame=function(){var e=pageData.poolSelect.$page;return!!(e&&/\/frameset$/.test(e)||top!==self&&1==top.isInFrame)},e.frame.refresh=function(e){top.refreshTab(e)}}(window.ydl?ydl:window.ydl={});var isInFrame=!0,poolSelect=pageData.poolSelect||{},userConfig=pageData.userConfig||{};!function(e,t){var a={};$(function(){function n(e){var a={},n={},i=[];return $.each(e.LEFT,function(e,t){i.push(t.id),a[t.id]=t.userinfo||[],"$$$$$$$$"==t.pid?n[t.id]?n[t.id]=$.extend(n[t.id],t):n[t.id]=t:(n[t.pid]?n[t.pid].list?n[t.pid].list.push(t):n[t.pid].list=[t]:n[t.pid]={list:[t]},n[t.id]?n[t.id]=$.extend(n[t.id],t):n[t.id]=t)}),$(".neck-menu").data("menuInfo",n),t.sessionData("plat_userdata",JSON.stringify(a)),{menuObj:n,menuOrder:i}}function i(e){var a="<ul>";$.map(e.menuOrder,function(t){var n=e.menuObj[t];"$$$$$$$$"==n.pid&&(a+='<li class="menu-level1" data-id="'+n.id+'"><a href="'+getUrl()+'" data-url=""><span class="menu-icon-nav"></span>'+n.name+'<span class="menu-icon-btn"></span></a>',n.list&&(a+="<ul>",$.map(n.list,function(e){a+='<li class="menu-level2" data-id="'+e.id+'"><a href="'+getUrl()+'" data-url="'+getUrl(e.url)+'">'+e.name+"</a></li>"}),a+="</ul>"),a+="</li>")}),a+="</ul>",$("#frameMenuBase").html(a),$(".menu-level1 > a").on("click",function(){var e=$(this).closest("li"),t=$(".menu-level1");e.hasClass("active")?(t.removeClass("active"),e.removeClass("active")):(t.removeClass("active"),e.addClass("active"))}),$(".menu-level2 > a").on("click",function(){var e=$(this),a=e.attr("data-url"),n=e.closest(".menu-level2").attr("data-id"),i=e.closest("li"),o=$(".menu-level2");i.hasClass("active")?(o.removeClass("active"),i.removeClass("active")):(o.removeClass("active"),i.addClass("active")),t.frame.add(a,{dataId:n})})}$(".home-logo-type").addClass("home-logo-"+(poolSelect._LONGINTYPE||"")),$(".user-name").text(poolSelect._OPERNAME||"未登录"),$("#systemExit").attr("href",getUrl()).attr("data-href",t.contexPath+"/logout/"+(poolSelect._OPERID||"nologin")),$("#sysHome").attr("href",getUrl()).on("click",function(){showTab("Home")}),$(".header-user").click(function(){$(".header-user>dl").is(":hidden")?($(this).addClass("show").find("i").addClass("names-dim"),$(".header-user>dl").slideDown()):$(".header-user>dl").slideUp(300,function(){$(".header-user").removeClass("show").find("i").removeClass("names-dim")})}),$("#systemExit").closest("dd").on("click",function(){closeNotice("systemExit")}),e.getMenuData=function(e){var a=poolSelect._OPERID,n="sys_menu_"+a,i=t.sessionData(n);i?e&&e(JSON.parse(i)):t.ajax(t.contexPath+"/menuInfo/select",{_POOLKEY:poolSelect._POOLKEY},function(a){t.sessionData(n,JSON.stringify(a)),e&&e(a)})},t.ajax(t.contexPath+"/message/queryMessageCount",{},function(e){var t=e.cnt,a=t&&t>0?'您有<span id="frameMessageCount">'+t+"</span>条新的消息提醒":"您无新的消息提醒";$("#frameMessage").html(a)}),e.getMenuData(function(e){a=n(e),inintNeckInfo(e.USERINFO[0]),i(a)}),$$("mainFrameHome").src=pageData.config.home,$("#frameNav").on("click","li span",function(){$("#frameNav li").length>1&&delTab($(this).closest("li").data("tabid"))}),$("#frameNav").on("shown.bs.tab click",' a[data-toggle="tab"]',function(e){var n=$(e.target),i=n.attr("data-id"),o="",r="",l="";i&&"home"!=i?a.menuObj[i]?(o=a.menuObj[i].name,r=a.menuObj[i].pid,l=a.menuObj[r].name):o=n.text():o="首页",reNewBreadNav(o,l),"正在加载"!=n.text()&&t.objectShow()}),$("#frameNav").on("click","a",function(e){e.preventDefault(),$(this).tab("show");var t=$(this).parent().data("tabid"),a=document.getElementById("mainFrame"+t).contentWindow;if(a.ydl){var n=a.ydl.data.listParameter;n&&$.each(n,function(e,t){a.ydl.listColWidth(e)});var i=a.ydl.data.dataList;i&&$.each(i,function(e,t){a.ydl.listColWidth(e)}),a.$(a.document).triggerHandler("framesetTabShown")}}),$(document.documentElement).keydown(function(e){return!(window.top.$("#screenLocker").length>0&&e.which==t.common.keys.F5)&&(e.which==t.common.keys.F5?(refreshTab(),!1):void 0)}),$(window).resize(function(){size()}).resize()})}(window.tpl?tpl:window.tpl={},window.ydl?ydl:window.ydl={});