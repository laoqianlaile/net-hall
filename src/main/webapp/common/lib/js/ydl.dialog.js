!function(e,t){function o(o){if(e.common.isIe){var i,a,n,l=pageData.poolSelect.$page;if(l&&/\/frameset$/.test(l)&&"/ish"==pageData.contexPath){if(n=t("#printDiv",t("#mainWrap .tab-pane.active iframe")[0].contentWindow.document),0==n.length)return;i=n.children("iframe")[0].contentWindow.document.getElementsByTagName("object"),a=t("object",n.children("iframe")[0].contentWindow.document),t(".layui-layer-shade:eq(-1) .bgiframe").length<1&&(t(".layui-layer-shade").bgiframe(),t(".bgiframe").css({"z-index":"0"}).css({"z-index":"-1"}))}else i=document.getElementsByTagName("object"),a=t("object"),n=t("#printDiv");if(0==i.length&&0==n.length)return;n.length>0&&(a=n),0==o&&0==a.closest(".modal").length?a.hide().addClass("hide"):0==t(".layui-layer.modal:visible:not(.layui-layer-loading)").length&&a.show().removeClass("hide")}}e.dialog={},layer.config({skin:"modal",zIndex:1050}),e.dialog.open=function(e,o,i,a){a||(a={});var n=t("<div></div>"),l=t.extend(a,{type:2,autoOpen:!0,content:e,close:!0,shown:function(e,t){a.open&&a.open();var o=window[e.find("iframe")[0].name];n.dialog("option","title",o.document.title)},hidden:function(){try{delete window.modalDialogArguments}catch(e){window.modalDialogArguments=null}var t=n.data("callbackArguments");i&&i.apply(this,t),n.dialog("destroy")}});n.dialog(l),window.modalDialogArguments={dialogArgs:o,dialogHandler:n,dialogCallback:i}},e.dialog.arguments=function(){return parent.modalDialogArguments.dialogArgs},e.dialog.close=function(){var e=parent.modalDialogArguments;e?(e.dialogHandler.data("callbackArguments",arguments),e.dialogHandler.dialog("close")):(top.close(),parent.dialogArguments.dialogCallback&&parent.dialogArguments.dialogCallback.apply(this,arguments))},e.makeDialog=function(e,o){var e=t.map(e.split(","),function(e){return"#"+e.trim()}).join(",");return o=t.extend({title:"对话框",size:"lg",autoOpen:!1,modal:!0},o||{}),t("<div></div>").append(t(e)).dialog(o)},e.detailDialog=function(e){e||(e={});var o="",i='<span class="yd-icon '+(e.icon||"info")+'"></span>',a='<h2 class="'+("pay"==e.icon||"ask"==e.icon||"common"==e.icon?"":"yd-message")+'">'+(e.message||"")+"</h2>",n=e.desc?e.desc:"",l="";return e.list&&!t.isEmptyObject(e.list)&&(l+='<table class="table table-hover table-bordered yd-list">'+(e.list.title?"<caption>"+e.list.title+"</caption>":"")+"<thead><tr>",t.each(e.list.head||[],function(e,t){l+="string"==typeof t?"<th><label>"+t+"</label></th>":'<th data-id="'+t.id+'"><label>'+t.text+"</label></th>"}),l+="</tr></thead><tbody>",t.each(e.list.body||[],function(o,i){l+="<tr>",t.isPlainObject(i)?t.each(e.list.head||[],function(e,t){l+='<td data-id="'+t.id+'">'+i[t.id]+"</td>"}):t.each(i,function(e,t){l+="<td>"+t+"</td>"}),l+="</tr>"}),l+="</tbody></table>"),o=e.html&&e.html.length>0?e.html:'<div class="yd-detail-dialog">'+i+a+(n?'<div class="yd-desc">'+n+"</div>":"")+l+"</div>"},e.customDialog=function(o){o=t.extend({buttons:o.buttons||[{text:"确定",theme:"primary",value:0},{text:"取消",value:1}]},o||{});var i=t(e.detailDialog({html:o.html||"",message:o.message||o.title,desc:o.desc||o.text,icon:o.icon||"",size:o.size||"",list:o.list||{}})),a=o.title||!1;o=t.extend(o,{autoOpen:!0,close:!1,title:!1}),o.html&&(o.title=a),o.shown=function(e){t.isFunction(o.open)&&o.open.call(e,e.find(".layui-layer-content")),o.focus!==!1&&e.find(".layui-layer-btn a:eq("+(o.focus||0)+")").focus()};var n=o.hidden||!1;o.hidden=function(e){n&&n(),t(e).remove()},i.appendTo("body").dialog(o)},e.alert=function(o,i){var a="",n="",l="";"string"==typeof o||"number"==typeof o?(l="info",a=o):(l=o.icon||(void 0!==o.code?"error":"info"),a=o.message||"",n=(o.code?"<b>错误码：</b>"+o.code+"<br>":"")+(o.desc?"<b>详细信息：</b>"+o.desc:""));var d=0!=o.copy?"复制信息,确定":"确定";e.customDialog({shade:void 0!=o.shade?o.shade:.3,title:!1,width:o.width||!1,height:o.height||!1,close:!1,spaceClose:!0,text:"",message:a,desc:n,icon:l,buttons:d,closeBtn:1,focus:0!=o.copy?1:0,callback:function(e){if(0!=o.copy&&0==e)return!1},hidden:function(){t.isFunction(i)&&i()},open:function(i){if(o.open&&o.open(i),0!=o.copy){var a=[];a.push("标题："+i.find("h2").text()),t.each(i.find("p"),function(){a.push(t(this).text())}),window.poolSelect&&poolSelect._OPERID&&poolSelect._OPERNAME&&a.push("操作人："+poolSelect._OPERID+"-"+poolSelect._OPERNAME),a.push("操作日期："+e.formatDate(new Date));var n=t(this).find('.layui-layer-btn a[value="0"]').attr("data-clipboard-text",a.join("\n"))[0];/Trident/.test(navigator.userAgent)&&t(n).click(function(){t("<div></div>").dialog("open").dialog("close").remove()}),t.getScript(e.contexPath+"/common/lib/js/clipboard.min.js",function(){new Clipboard(n).on("success",function(e){t(e.trigger).text("已复制到剪贴板")})})}},shadeClose:void 0==o.shadeClose||o.shadeClose})},e.toast=function(t,o,i){return 0==t?void layer.close(e.toast.index):void(o?(o.icon||(o.skin="layui-layer-hui"),i?e.toast.index=layer.msg(t,o,i):e.toast.index=layer.msg(t,o)):e.toast.index=layer.msg(t,{skin:"layui-layer-hui"}))},e.toolTips=function(t,o,i){i&&(o.end=i),o.dom=e.getDom(o.dom),layer.tips(t,o.dom,o)},e.loading=function(o,i,a){if(0==o)layer.close(e.loading.index);else if("close"==o)layer.close(i);else{if(void 0==i&&(i=0),void 0==a&&(a={}),a.dom){var n=t(e.getDom(a.dom)),l=n.offset();a.area=[n.width()+"px",n.height()+"px"],a.offset=[l.top+"px",l.left+"px"]}a.success=function(o,i){var n=pageData.poolSelect.$page;n&&/\/frameset$/.test(n)&&"/ish"==pageData.contexPath?(e.common.isIe&&t("#mainWrap .tab-pane.active iframe")[0].contentWindow.$("#printDiv > iframe")[0].contentWindow.document.getElementsByTagName("object").length>0&&o.find(".layui-layer-content").bgiframe(),a.shown&&a.shown(o,i)):(e.common.isIe&&document.getElementsByTagName("object").length>0&&o.find(".layui-layer-content").bgiframe(),a.shown&&a.shown(o,i))},a.end=function(){a.hidden&&a.hidden()},e.loading.index=layer.load(i,a)}},e.confirm=function(o){var i="string"==typeof o?o:o.message,a=t.Deferred();return e.customDialog(t.extend(o,{icon:"ask",message:i,callback:function(e){0==e?a.resolve():a.reject()}})),a.promise()},t.fn.dialog=function(i,a,n){function l(t){var o={12:[360,650,900],14:[370,720,1020],16:[380,790,1130],18:[390,850,1200]},i=e.userConfig?e.userConfig.get("base_font_size")||12:12;t.area=o[i][1]+"px",t.size&&("lg"==t.size?t.area=o[i][2]+"px":"sm"==t.size&&(t.area=o[i][0]+"px")),t.width&&(t.area=(t.width+"").indexOf("px")>0?t.width:t.width+"px"),t.height&&(t.height=(t.height+"").indexOf("px")>0?t.height:t.height+"px",t.area=[t.area,t.height])}if(i&&i.dialogVersion||"scroll"==this.data("dialog-func"))return this.dialogScroll(i,a,n).data("dialog-func","scroll");var d=this;if("string"==typeof i){var s=this.data("dialog-index");if("open"==i){var c=this.data("dialog-options");l(c),c.show&&c.show(),layer.open(c)}if("close"==i&&layer.close(s),"destroy"==i&&this.remove(),"option"==i){var r=this.data("dialog-options");r[a]=n,this.data("dialog-options",r),"title"==a&&layer.title(n,s)}return"style"==i&&layer.style(s,a),this}if(void 0!=this.data("dialog-inited"))return this;if(t("body").append(this.hide()),this.data("dialog-inited",!0),i=t.extend({title:"对话框",type:1,resize:!1,content:t(d),maxHeight:document.documentElement.clientHeight-30},i||{}),!i.id){var u=t("body").data("dialogIndex")||1;i.id="_dialog_"+u,t("body").data("dialogIndex",parseInt(u)+1)}if(i.area||l(i),0==i.close&&(i.closeBtn=!1),void 0!=i.closeOnEscape&&(i.shadeClose=i.closeOnEscape),i.closeButton&&(i.cancel=function(e,t){var o=i.closeButton(t,e);if(0==o)return!1}),i.end=function(){i.hidden&&i.hidden(d),o();var e=d.data("dialog-index");i.spaceClose&&t(document.documentElement).off("keydown.dialogclose"+e),t("body,div").off("scroll.dialogscroll"+e)},i.buttons){"string"==typeof i.buttons?i.buttons=t.map(i.buttons.split(","),function(e,t){return{text:e,value:t}}):t.isPlainObject(i.buttons)&&(i.buttons=t.map(i.buttons,function(e,t){return{text:t,click:e}})),i.buttons=t.map(i.buttons,function(e,t){return"string"==typeof e?{text:e,value:t}:(void 0==e.value&&(e.value=t),e)});var h=[];t.each(i.buttons,function(e,o){h.push(o.text);var a=0==e?"yes":"btn"+(e+1);i[a]=function(a,n){var l=!0;return t.isFunction(i.callback)&&(l=i.callback.call(n,o.value,o.text,n.find(".layui-layer-content"))),o.click&&0==o.click(a,n)&&(l=!1),0!=l&&void(0==e&&layer.close(a))}}),i.btn=h}return i.success=function(a,n){o(!1),t("body,div").not(".tips-keep-on-scroll").on("scroll.dialogscroll"+n,function(){t(".datetimepicker").hide()}),i.height&&a.addClass("dialog-height"),i.buttons&&t.each(i.buttons,function(e,t){var o=a.find(".layui-layer-btn a:eq("+e+")").attr("href","#");void 0!=t.value&&o.attr("value",t.value),t.id&&o.prop("id",t.id),t.theme&&o.addClass(t.theme),t.icon&&o.prepend('<span class="glyphicon glyphicon-'+t.icon+'"></span>')}),d.data("dialog-index",n),i.spaceClose&&t(document.documentElement).on("keydown.dialogclose"+n,function(o){t(d).is(":visible")&&o.which==e.common.keys.Space&&(i.spaceCloseFunc&&i.spaceCloseFunc(),layer.close(n),o.preventDefault())}),i.shown&&i.shown(a,n)},i.create&&"function"==typeof i.create&&i.create(this),this.data("dialog-options",i),i.autoOpen&&(i.show&&i.show(),layer.open(i)),this},e.dialog.scroll=function(o){o=t.extend({autoOpen:!0,close:!0},o||{});var i=t(o.html?"<div>"+o.html+"</div>":e.getDom(o.content));i.show().removeClass("hide");var a=i.data("initDom");return void 0!=a?a.dialogScroll("open"):(a=i.dialogScroll(o),i.data("initDom",a)),a},t.fn.dialogScroll=function(e,i,a){var n=this;if("string"==typeof e)return"open"==e&&this.modal({backdrop:this.data("closeOnEscape")||"static",keyboard:this.data("closeOnEscape")}),"close"==e&&this.modal("hide"),"destroy"==e&&this.closest(".modal").remove(),"option"==e&&"title"==i&&this.find("h4.modal-title").html(a),this;if(void 0!=this.data("dialog-inited"))return this;t(this).data("dialog-inited",!0),e=t.extend({title:"对话框"},e||{});var l=e.close?'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">× </button>':"",d=t('<div class="modal fade" data-backdrop="static" '+(e.id?'id="'+e.id+'"':"")+'tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog'+(e.size?" modal-"+e.size:"")+'"><div class="modal-content"><div class="modal-header">'+l+'<h4 class="modal-title">'+e.title+'</h4></div><div class="modal-body"></div></div></div></div>');if(d.find(".modal-body").append(this),t("body").append(d),d.data("closeOnEscape",e.closeOnEscape||!1),e.buttons){var s=t('<div class="modal-footer"></div>');t.each(e.buttons,function(e,o){var i=t('<button type="button" class="btn btn-default">'+e+"</button>");"function"==typeof o&&i.click(function(){o.call(d,n)}),s.append(i)}),d.find(".modal-content").append(s)}return e.create&&"function"==typeof e.create&&e.create(),e.hidden&&d.on("hidden.bs.modal",function(){o(),e.hidden()}),e.shown&&d.on("shown.bs.modal",function(){o(!1),e.shown()}),e.hide&&d.on("hide.bs.modal",function(){e.hide()}),e.show&&d.on("show.bs.modal",function(){e.show()}),e.autoOpen&&d.modal({backdrop:d.data("closeOnEscape")||"static",keyboard:d.data("closeOnEscape")}),d},e.objectShow=o}(window.ydl?ydl:window.ydl={},jQuery);